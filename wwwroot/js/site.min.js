"use strict";function highlightRow(n){if(currentlySelectedRow==n){currentlySelectedRow.style.background="white";currentlySelectedRow=null;return}currentlySelectedRow!=null&&(currentlySelectedRow.style.background="white");currentlySelectedRow=n;currentlySelectedRow.style.background="bisque"}function getContactList(n=""){fetch("/Home/GetContacts?searchTerm="+n,{method:"POST",cache:"no-cache",credentials:"same-origin",referrerPolicy:"no-referrer"}).then(n=>n.text()).then(n=>{document.getElementById("section_contactList").innerHTML=n})}function editContact(n){fetch("/Home/EditContact?id="+n,{method:"POST",cache:"no-cache",credentials:"same-origin",referrerPolicy:"no-referrer"}).then(n=>n.text()).then(n=>{document.getElementById("modal_createEditContact").innerHTML=n,$("#createEditContactModal").modal("show")})}function submitContact(){var n=new XMLHttpRequest,t;n.open("POST","/Home/EditCreateContact");t=new FormData(document.querySelector("#form-editContact"));n.send(t);n.onload=function(){n.response=="true"?Swal.fire({title:"Saved Successfully",confirmButtonText:`Awesome!`,allowOutsideClick:!1}).then(()=>{closeNewContact(),getContactList(),connection.invoke("DataUpdate").catch(function(n){console.error(n.toString())})}):Swal.fire("Failed to save.",n.response,"warning")}}function deleteEmail(n){let t=document.querySelector("#EmailAddresses_"+n+"__IsDeleted");t!==null&&(t.value="True");document.querySelector("#emailInput-"+n).classList.add("hidden")}function closeNewContact(){$("#createEditContactModal").modal("hide");let n=document.getElementById("modal_createEditContact");n.innerHTML=""}function newEmailAddress(){let n=$("#emailEditor").clone(),t=0;document.getElementById("section-emailAddresses").getElementsByClassName("emailindex").length>0&&(t=parseInt($("#section-emailAddresses .email").last().find(".emailindex").val())+1);n.html($(n).html().replace(/#/g,t));$("#section-emailAddresses").append(n.html());let i=$("form");i.data("validator",null);$.validator.unobtrusive.parse(i)}function importContacts(){$("#importContactsModal").modal("show")}function uploadImportFile(){var n=new XMLHttpRequest,t;n.open("POST","/Home/ImportFile");t=new FormData(document.getElementById("form-importFile"));n.send(t);n.onload=function(){n.response=="true"?Swal.fire({title:"Imported Successfully",confirmButtonText:`Awesome!`,allowOutsideClick:!0}).then(()=>{$("#importContactsModal").modal("hide"),getContactList(),connection.invoke("DataUpdate").catch(function(n){console.error(n.toString())})}):(Swal.fire("Failed to save.",n.response,"warning"),$("#importContactsModal").modal("hide"),$("#input-importFile").val(null))}}var connection=(new signalR.HubConnectionBuilder).withUrl("/contactListHub").build();connection.on("RefreshContactList",function(){getContactList($("#inputSearch").val())});connection.start().catch(function(n){return console.error(n.toString())});$("#inputSearch").keyup(function(){getContactList($("#inputSearch").val())});let currentlySelectedRow=null;